<style>
  .guarantee-section {
    --section-background: {% if section.settings.use_theme_colors %}{% if settings.global_section_use_gradient_background %}{{ settings.global_section_gradient_background }}{% else %}{{ settings.global_section_background_color }}{% endif %}{% elsif section.settings.section_background != blank %}{{ section.settings.section_background }}{% else %}#FFFFFF{% endif %};
    --padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
    --padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
    --padding-top: {{ section.settings.padding_top }}px;
    --padding-bottom: {{ section.settings.padding_bottom }}px;
    --overflow-setting: {% if section.settings.allow_overflow %}visible{% else %}hidden{% endif %};
    --padding-top-no-photos: {{ section.settings.padding_top_no_photos }}px;

    --polaroid-size-mobile: {{ section.settings.polaroid_size_mobile }}px;
    --polaroid-size-desktop: {{ section.settings.polaroid_size_desktop }}px;
    --polaroid-z-index: {% if section.settings.allow_overflow %}2{% else %}auto{% endif %};

    {% assign mobile_padding_extension = section.settings.padding_top_mobile | times: section.settings.image_extension | divided_by: 100 %}
    {% assign mobile_top_offset = section.settings.padding_top_mobile | minus: mobile_padding_extension %}
    --mobile-photos-margin-top: {{ mobile_top_offset | times: -1 | plus: section.settings.image_vertical_offset }}px;

    {% assign padding_extension = section.settings.padding_top | times: section.settings.image_extension | divided_by: 100 %}
    {% assign top_offset = section.settings.padding_top | minus: padding_extension %}
    {% assign bottom_padding_extension = section.settings.padding_bottom | times: section.settings.image_extension | divided_by: 100 %}
    {% assign bottom_offset = section.settings.padding_bottom | minus: bottom_padding_extension | times: -1 | plus: section.settings.image_vertical_offset %}
    --photos-margin-top: {{ top_offset }}px;
    --photos-margin-bottom: {{ bottom_offset }}px;
    --photos-z-index: {% if section.settings.allow_overflow %}10{% else %}1{% endif %};

    --content-padding-mobile: {{ section.settings.content_padding_mobile }}px;
    --content-padding-desktop: {% if section.settings.show_photos %}{{ section.settings.content_padding_desktop }}{% else %}20{% endif %}px;
    --content-width: {% if section.settings.show_photos %}{{ section.settings.content_width_with_photos }}{% else %}100{% endif %}%;
    --content-max-width: {% if section.settings.show_photos %}{{ section.settings.content_max_width_with_photos }}{% else %}300{% endif %}px;

    --icon-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% else %}{{ section.settings.icon_color }}{% endif %};

    --heading-size-mobile: {{ section.settings.heading_size_mobile }}px;
    --heading-size-desktop: {{ section.settings.heading_size_desktop }}px;
    --heading-line-height: {{ section.settings.heading_line_height | default: 1.3 }};

    --risk-free-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% elsif section.settings.risk_free_color %}{{ section.settings.risk_free_color }}{% else %}{{ settings.accent_text_color }}{% endif %};
    --beauty-revolution-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.beauty_revolution_color }}{% endif %};
    --beauty-revolution-margin-left: {{ section.settings.accent_text_margin_left | default: 3 }}px;
    --accent-font-family: {{ settings.accent_text_font.family }}, {{ settings.accent_text_font.fallback_families }};
    --accent-font-weight: {{ settings.accent_text_weight }};
    --accent-font-style: {{ settings.accent_text_style }};

    --description-size-mobile: {{ section.settings.description_size_mobile }}px;
    --description-size-desktop: {{ section.settings.description_size_desktop }}px;
    --description-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.description_color }}{% endif %};
    --description-line-height: {{ section.settings.description_line_height }};

    --button-background: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% else %}{{ section.settings.button_color }}{% endif %};
    --button-background-hover: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color | color_darken: 10 }}{% else %}{{ section.settings.button_color | color_darken: 10 }}{% endif %};
    --button-text-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_background_color }}{% else %}{{ section.settings.button_text_color }}{% endif %};

    --benefit-size-mobile: {{ section.settings.benefit_size_mobile }}px;
    --benefit-size-desktop: {{ section.settings.benefit_size_desktop }}px;
    --benefit-text-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.benefit_text_color }}{% endif %};
    --checkmark-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% else %}{{ section.settings.button_color }}{% endif %};
  }

  /* Fix for double background issue */
  .guarantee-section .guarantee-section {
    background: transparent !important;
  }

  /* Button Styling with Global Support */
  .guarantee-section__cta {
    /* Always use global spacing and consistency */
    padding: var(--global-button-padding-y, 12px) 20px !important;
    letter-spacing: var(--global-button-letter-spacing, 1px) !important;

    {% if settings.enable_global_button_styling and section.settings.use_global_button_style %}
      /* Use Global Button Styling */
      font-size: var(--global-button-font-size, 14px) !important;
      font-weight: var(--global-button-font-weight, 700) !important;
      text-transform: var(--global-button-text-transform, none) !important;
      border-radius: var(--global-button-radius, 8px) !important;
      background-color: var(--global-button-bg-color, #EF4A65) !important;
      color: var(--global-button-text-color, #FFFFFF) !important;
      border: var(--global-button-border-width, 0px) solid var(--global-button-border-color, #EF4A65) !important;
    {% else %}
      /* Use Section Custom Colors (but keep global spacing) */
      background-color: var(--button-background) !important;
      color: var(--button-text-color) !important;
      border: none !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      border-radius: 8px !important;
    {% endif %}
  }

  .guarantee-section__cta:hover {
    {% if settings.enable_global_button_styling and section.settings.use_global_button_style %}
      /* Global Button Hover State */
      background-color: var(--global-button-hover-bg-color, #D63953) !important;
      color: var(--global-button-hover-text-color, #FFFFFF) !important;
    {% else %}
      /* Custom Section Hover State */
      background-color: var(--button-background-hover) !important;
      color: var(--button-text-color) !important;
    {% endif %}
  }

  .guarantee-section {
    background: var(--section-background);
  }

  .guarantee-section__wrapper {
    width: 100%;
    max-width: 100%;
    font-family: var(--font-body-family-override);
    font-weight: var(--font-weight-regular);
    box-sizing: border-box;
    letter-spacing: var(--letter-spacing-body);
    padding: {{ section.settings.section_padding_vertical }}px {{ section.settings.section_padding_horizontal }}px;
    margin-top: var(--margin-top-mobile);
    margin-bottom: var(--margin-bottom-mobile);
    overflow: var(--overflow-setting);
    position: relative;
  }

  .guarantee-section__container {
    {% if section.settings.contain_section %}
      max-width: 1200px;
      margin: 0 auto;
      padding: {{ section.settings.container_padding }}px;
      background: {{ section.settings.container_background | default: '#FFFFFF' }};
      {% if section.settings.enable_border %}
        border: {{ section.settings.border_width }}px {{ section.settings.border_style }} {{ section.settings.border_color }};
        border-radius: {{ section.settings.border_radius }}px;
      {% endif %}
      {% if section.settings.enable_shadow %}
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      {% endif %}
    {% endif %}
  }

  @media screen and (max-width: 768px) {
    .guarantee-section__wrapper {
      padding: {{ section.settings.section_padding_vertical_mobile }}px {{ section.settings.section_padding_horizontal_mobile }}px;
    }
  }

  /* Global heading typography */
  .guarantee-section__heading {
    color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.heading_text_color }}{% endif %} !important;
    line-height: var(--heading-line-height) !important;
  }

  /* Enhanced accent text styling */
  .guarantee-section .accent-text {
    {% if section.settings.use_global_accent_typography %}
      /* Use Global Accent Typography */
      font-family: var(--font-accent-family) !important;
      font-style: var(--font-accent-style) !important;
      font-weight: var(--font-accent-weight) !important;
      letter-spacing: var(--font-accent-letter-spacing) !important;
      text-transform: var(--font-accent-text-transform) !important;
    {% else %}
      /* Use Section-Specific Accent Typography */
      {% if section.settings.accent_font_family != 'inherit' %}
        {% case section.settings.accent_font_family %}
          {% when 'serif' %}
            font-family: serif !important;
          {% when 'Georgia Pro' %}
            font-family: 'Georgia Pro', Georgia, serif !important;
          {% when 'Bodoni Moda' %}
            font-family: 'Bodoni Moda', Georgia, serif !important;
          {% when 'Instrument Serif' %}
            font-family: 'Instrument Serif', Georgia, serif !important;
          {% when 'DM Serif Text' %}
            font-family: 'DM Serif Text', Georgia, serif !important;
          {% when 'Nothing You Could Do' %}
            font-family: 'Nothing You Could Do', cursive !important;
        {% endcase %}
      {% endif %}
      {% if section.settings.accent_font_style != 'normal' %}
        font-style: {{ section.settings.accent_font_style }} !important;
      {% endif %}
      {% if section.settings.accent_font_weight != 'inherit' %}
        font-weight: {{ section.settings.accent_font_weight }} !important;
      {% endif %}
    {% endif %}

    /* Apply the accent text left margin */
    margin-left: var(--beauty-revolution-margin-left) !important;

    /* Color and Gradient Application */
    {%- if section.settings.use_global_accent_typography -%}
      {%- comment -%} When using global accent typography, also use global accent color {%- endcomment -%}
      color: {{ settings.global_section_accent_1_color }} !important;
    {%- elsif section.settings.use_theme_colors -%}
      background: {{ settings.global_accent_text_gradient_dark }} !important;
      -webkit-background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
      background-clip: text !important;
      color: transparent !important;
      line-height: 1.3 !important;
    {%- elsif section.settings.use_accent_gradient and section.settings.accent_text_gradient != blank -%}
      background: {{ section.settings.accent_text_gradient }};
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      line-height: 1.3 !important;
    {%- else -%}
      color: {{ section.settings.accent_color | default: '#ef4a65' }} !important;
    {%- endif -%}

    padding-right: 0px !important;
    display: inline-block !important;
  }

  /* Load-in animation */
  .page-fade-in {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.8s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Add slight delay for staggered effect on multiple sections */
  .page-fade-in:nth-child(2) { animation-delay: 0.1s; }
  .page-fade-in:nth-child(3) { animation-delay: 0.2s; }
  .page-fade-in:nth-child(4) { animation-delay: 0.3s; }
</style>
